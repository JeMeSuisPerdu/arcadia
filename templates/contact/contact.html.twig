{% extends 'base.html.twig' %}

{% block title %}Contact{% endblock %}

{% block body %}
{{navbar()}}
<form id="contact-form">
    <input type="text" name="name" placeholder="Votre nom" required>
    <input type="email" name="user_email" placeholder="Votre e-mail" required>
    <textarea name="message" placeholder="Votre message" required></textarea>
    <button type="submit">Envoyer</button>
</form>
<div id="form-message"></div>


<div id="contact-form" class="form-container">
      <div class="form">
      <div class="logo-container" style="margin-bottom: 10px;">
        <strong>Envoyer un avis ? üìù</strong>
      </div>

        <div class="form-group">
          <label for="nom_contact">Votre nom</label>
          <input id="nom_contact" type="text" name="name" placeholder="Votre nom" required>
        </div>

        <div class="form-group">
          <label for="email_contact">Votre Email</label>
          <input id="email_contact"type="email" name="user_email" placeholder="Votre e-mail" required>
        </div>

        <div class="form-group-checkbox">
          <label style="margin-right:10px;">Votre message</label>
          <textarea name="message" placeholder="Votre message" required></textarea>
        </div>

        <button type="submit">Envoyer</button>
      </div>
</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script type="text/javascript">
   (function(){
      emailjs.init("8ImgpXrgScVJ2hZxg"); // Remplace par ta cl√© publique

      document.getElementById('contact-form').addEventListener('submit', function(event) {
          event.preventDefault();

          var params = {
              from_name: this.name.value,
              user_email: this.user_email.value,
              to_name: "Nom du destinataire", // ou l'adresse e-mail de l'entreprise
              message: this.message.value
          };

          emailjs.send('service_4r61xjc', 'template_omufsyx', params)
              .then(function() {
                  document.getElementById('form-message').innerHTML = 'Message envoy√© avec succ√®s !';
              }, function(error) {
                  console.error("Erreur lors de l'envoi :", error);
                  document.getElementById('form-message').innerHTML = '√âchec de l\'envoi du message : ' + JSON.stringify(error);
              });
      });
   })();
</script>
</html>


{% endblock %}
